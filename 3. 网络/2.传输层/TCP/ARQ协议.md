# ARQ协议
也就是**超时重传机制**，通过确认和超时机制保证了数据的正确到达。

## 停止等待 ARQ

### 正常传输过程
只要A向B发送一个报文，都是停止发送并开启一个定时器，等待对端回应，在定时器时间内接收到对端应答就取消定时器并发送下一段报文。
### 报文丢失或出错
在报文传输的过程中可能会出现丢包，超出定时器设定的时间就会重新发送丢失的数据直到对端响应，所以需要每次都备份要发送的数据。

即使报文正确传输到对端，也可能在传输过程中出错，这时对端会抛弃该报文并等待A 重传

### ACK超时或丢失
对端传输的应答可能出现丢失或超时的情况，超过定时器时间，A 会重传报文，B收到相同序号的报文后会丢弃该报文并重新应答，直到A发送下一个序号的报文。

## 连续ARQ

发送端有一个发送窗口，可以在没有收到应答的情况下持续发送窗口中的数据，相比 停止等待ARQ 来说减少了等待时间，提高了效率。

### 累计确认
连续ARQ中，接收端会不断的收到报文，如果和停止等待 ARQ 中接受一个报文就发送一个应答一样，就太浪费了。通过累计确认，可以在收到多个报文之后统一回复一个应答报文，报文中的ACK标志位可以告诉发送端这个序号之前的报文都收到了，下次从这个序号后开始发。

弊端：在连续接受报文时，可能会遇到接收到序号5和7的报文，但序号6的报文没有接收到，ACK只能回复6，会造成发送端重复发送数据的情况。