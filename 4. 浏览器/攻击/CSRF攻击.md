# CSRF (Cross-Site Request forgery)

跨站请求伪造。

攻击者诱导用户进入一个第三方网站，然后该网站向被攻击网站发送跨站请求，如果用户在被攻击网站中保存了登陆状态，那么攻击者就可以利用这个状态，绕过后台的用户验证，冒充用户向服务器执行一些操作

例子：假设一个网站中有一个通过 GET 请求提交用户评论的接口，那么攻击者就可以在钓鱼网站中加入一个图片，图片的地址就是评论接口。
```
<img src="http://www.domain.com/xxx?comment='attack'">
```

## 如何防范CSRF攻击

遵循的规则：
1. GET 请求不对数据进行修改
2. 不让第三方网站请求到用户Cookie
3. 阻止第三方网站请求接口
4. 请求时附带验证信息，比如验证码或者 Token

**same-site**
- 对Cookie设置 same-site。该属性表示Cookie 不随着跨域请求发送，可以很大程度减少 CSRF 的攻击。
- 有浏览器不兼容

**验证Referer**
- 对于需要防范 CSRF 的请求，我们可以通过验证Referer 来判断该请求是否为第三方网站发起的。

**Token**
- 服务器下发一个随机 Token，每次发起请求时将 Token 携带上，服务器验证 Token 是否有效。
