3.1 报文

HTTP报文是在HTTP应用程序之间发送的数据块。

报文流入源端服务器

HTTP使用术语流入和流出来描述事务处理的方向。

报文流入源端服务器，工作完成之后，回流回用户的Agent代理中。

报文向下游流动

所有报文的发送者都在接收者的上游。不管是请求报文还是响应报文，所有报文都会向下游流动。

3.2 报文的组成部分

报文包含一条来自客户端的请求，或者一条来自服务器的响应。

它们由三个部分组成：对报文进行描述的起始行，包含属性的首部块，以及可选的包含数据的主体部分。

起始行和首部就是由行分隔的ASCII文本。
首部给出了一些与主体有关的信息。
实体的主体或报文的主体是一个可选的数据块。主体可以包含文本或二进制数据。
报文的语法

所有的HTTP报文分为两类：请求报文和响应报文。

请求报文会向Web服务器请求一个动作。响应报文会将请求结果返回给客户端。

请求报文格式：

<method><path><version>
<headers>

<entity-body>
响应报文格式：

<version><status><reason-phrase> <headers> <entity-body>
方法(method)
请求URL(request-URL)
版本(version)
状态码(status-code)
原因短语(reason-phrase)
首部(header)
实体的主体部分(entity-body)
起始行

1. 请求行

请求报文请求服务器对资源进行的一些操作
包含了一个方法和一个请求URL，这个方法描述了服务器应该执行的操作，请求URL描述了要对哪个资源执行这个方法。请求韩中还包含HTTP的版本，用来告知服务器，客户端使用的是哪种HTTP。
2. 响应行

响应报文承载了状态信息和操作产生的所有结果数据，将其返回给客户端。
包含了响应报文使用的HTTP版本、数字状态码、以及描述操作状态的文本形式的原因短语。
3. 方法

请求的起始行以方法作为开始，用来告知服务器要做些什么。
方法	描述	是否包含主体
GET	从服务器获取一份文档	否
HEAD	只从服务器获取文档的首部	否
POST	向服务器发送需要处理的数据	是
PUT	将请求的主体部分存储在服务器上	是
TRACE	对可能经过代理服务器传送到服务器上去的报文进行追踪	否
OPTIONS	决定可以在服务器上执行哪些方法	否
DELETE	从服务器上删除一份文档	否
4. 状态码

方法告诉服务器做什么事情，状态码则告诉客户端，发生了什么事情。
状态码是在每条响应报文的起始行中返回的。会返回一个数字状态和一个可读的状态。数字码便于程序进行差错处理，而原因短语则便于人们理解。
状态码分类：

整体范围	已定义范围	分类
100~199	100~101	信息提示
200~299	200~206	成功
300~399	300~305	重定向
400~499	400~415	客户端错误
500~599	500~505	服务器错误
常见状态码：

状态码	原因短语	含义
200	OK	成功。请求的所有数据都在响应主体中
401	Unauthorized(未授权)	需要输入用户名和密码
404	Not Found(未找到)	服务器无法找到请求URL对应的资源
5. 原因短语

原因短语是响应起始行中的最后一个组件。它为状态码提供了文本形式的解释。
6. 版本号

版本号会以HTTP/x.y的形式出现在请求和响应报文的起始行中。为HTTP应用程序提供了一种将自己所遵循的协议版本告知对方的方式。
版本号不会被当作小数来处理。版本中的每个数字都会被当作一个单独的数字来处理。
首部

常见的首部：

首部实例	描述
Date:Tue,30ct 1997 02:16:03 GMT	服务器产生响应的日期
Content-length:15040	实体的主体部分包含了15040字节的数据
Content-type:image/gif	实体的主体部分是一个GIF图片
Accept：image/gif,image/jpeg,text/html	客户端可以接收GIF图片和JPEG图片以及HTML
实体的主体部分

版本0.9的报文

HTTP.0.9报文也由请求和响应组成，但请求中只包含方法和请求URL，响应中只包含实体。它没有版本信息，没有状态码或原因短语，也没有首部。

3.3 方法

安全方法

安全方法并不一定是什么动作都不执行的。使用安全方法的目的是当使用可能引发某一动作的不安全方法时，允许HTTP应用程序开发者通知用户。

GET

用于请求服务器发送某个资源
HEAD

HEAD方法与GET方法很类似，但服务器在响应中只返回首部。不会返回实体的主体部分。这就允许客户端在未获取实际资源的情况下，对资源的首部进行检查。
使用HEAD，可以：

在不获取资源的情况下了解资源的情况
通过查看响应中的状态码，看看某个对象是否存在
通过查看首部，测试资源是否被修改了
服务器开发者必须确保返回的首部与GET请求所返回的首部完全相同
PUT

与GET从服务器读取文档相反，PUT方法会向服务器写入文档。
PUT方法的语义就是让服务器用请求的主体部分来创建一个由所请求的URL命名的新文档，或者，如果那个URL已经存在的话，就用这个主体来代替它。
POST

POST方法起初是用来向服务器输入数据的。
TRACE（待补充）

客户端发起一个请求时，这个请求可能要穿过防火墙、代理、网关或其他一些应用程序。每个中间节点都可能会修改原始的HTTP请求。
TRACE方法允许客户端在最终将请求发送给服务器时，看看它变成了什么样子。
OPTIONS（待）

DELETE

请服务器删除请求URL所指定的资源
客户端程序无法保证删除操作一定会被执行。因为HTTP规范允许服务器在不通知客户端的情况下撤销请求
扩展方法（待）

3.4 状态码

100~199 信息性状态码

状态码...	原因短语	含义
100	Continue	说明收到了请求的初始部分，请客户达继续。发送了这个状态码之后，服务器在收到请求之后必须进行响应。
101	Switching Protocols	说明服务器正在根据客户端的指定，将协议切换成Update首部所列的协议
200~299 成功状态码

状态码啊啊啊啊	原因短语	含义
状态码	原因短语	含义
200	OK	请求没问题，实体的主体部分包含了所请求的资源
201	Created	用于创建服务器对象的请求。响应的实体主体部分中应该包含各种引用 已创建的资源的URL，Location首部包含的则是最具体的引用
202	Accepted	请求已被接受，但服务器还未对其执行任何动作。不能保证服务器会完成这个请求
203	Non-Authoritative Information	实体首部包含的信息不是来自源服务器，而是来自资源的一份副本。如果中间节点上有一份资源副本，但无法或者没有对它所发送的与资源有关的元信息（首部）进行验证，就不会出现这种情况。
204	No Content	响应报文中包含若干首部和一个状态行，但没有实体的主体部分。主要用于在浏览器不转为显示新文档
205	Reset Content	另一个主要用于浏览器的代码。负责告知浏览器清除当前页面中的所有HTML表单元素
206	Partial Content	成功执行了一个部分或Range(范围)请求。稍后我们会看到，客户端可以通过一些特殊的首部来获取部分或某个范围内的文档-这个状态码就说明范围请求成功了。
300~399 重定向状态码

重定向状态码要么告知客户端使用替代位置来访问他们所感兴趣的资源，要么就提供一个替代的响应而不是资源的内容。
如果资源已被移动，可以发送一个重定向状态码和一个可选的Location首部来告知客户端资源已被移走，以及现在可以在哪里找到它。
状态码	原因语句	含义
300		
301		
302		
303		
304		
305		
306		
307		
400~499 客户端错误状态码

状态码	原因语句	含义
401		
402		
403		
404		
405		
406		
407		
408		
409		
410		
411		
412		
413		
414		
415		
416		
417		
500~599 服务器错误状态码

有时客户端发送一条有效请求，服务器自身却出错了。这可能是客户端碰上了服务器的缺陷，或者服务器上的子元素，比如某个网关资源出了错。
状态码	原因语句	含义
500	Internal Server Error	服务器遇到一个妨碍它为请求提供服务的错误时，使用此状态码
501	Not Implemented	客户端发起的请求超出服务器的能力范围时(比如使用了服务器不支持的请求方法时)
502	Bad Gateway	作为代理或网关使用的服务器从请求响应链的下一条链路上收到了一条伪响应(比如，它无法连接到其父网关)
503	Service Unavaiabe	用来说明服务器现在无法为请求提供服务，但将来可以。如果服务器知道什么时候资源会变为可用的，可以在响应中包含一个Retry-After首部。
504	Gateway Timeout	与状态码408类似，只是这里的响应来自一个网关或代理，它们在等待另一服务器对其请求进行响应时超时了
505	HTTP Version Not Support	服务器收到的请求使用了它无法或不愿支付的协议版本时
3.5 首部

通用首部

请求首部

响应首部

实体首部